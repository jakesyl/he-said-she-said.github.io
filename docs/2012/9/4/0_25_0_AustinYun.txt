modules like filed work beautifully because it's end-to-end streaming (open a readstream from a file, pipe it to a compressor, pipe the result to the response), but it seems if you have to insert something from memory into the stream stuff breaks down