this is the function that generates hash and salt. it saves it in local memory in USERS object. you will need to modify it and include your async mongo code. https://github.com/therealplato/passport-multiauth-demo/blob/master/app.js#L490