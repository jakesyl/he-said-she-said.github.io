you could also (but that depends on what you want) make it circular, so that if index > buffer.length, index = 0