nathan7: compile step, partially monkey patching the DOM.