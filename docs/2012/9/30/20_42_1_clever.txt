both cases wait for everything to return before running the function