Callbacks don't have to lead to waterfall code