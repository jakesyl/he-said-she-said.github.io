I use the following code to serve a zipfile from an embedded system: https://gist.github.com/3783802. Packing to /tmp (ram) for speed, but some directories are just to big. Any way I can do this without an intermediate file, and without sacrificing (much) speed?