Didn't remember that developing on windows is such a pain. It seems that nodejs configure-script (and also some msvc project generators inside gyp) use PROCESSOR_ARCHITECTURE -environment variable to test if the cpu/os is x64 or ia32