how do i make sure that _retval returns the result from an inner callback like http://pastie.org/4759819 