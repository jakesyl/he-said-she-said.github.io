need to separate that while loop out  as a function of its own and call it to start and then again on resume.