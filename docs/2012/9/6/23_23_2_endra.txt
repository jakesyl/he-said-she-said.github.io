Is it possible that it connects before it reads event.on('connect') ?