too bad i can't "register" a new encoding to like, process buffers with a callback