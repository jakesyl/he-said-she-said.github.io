that's like writing an asm emulator in prolog