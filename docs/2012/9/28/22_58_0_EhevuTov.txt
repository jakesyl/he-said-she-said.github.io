derekderekpionee, I'm not sure if my scope is right, but I think I also made your for loop more efficient by using a variable instead of query.length each time: https://gist.github.com/3802492