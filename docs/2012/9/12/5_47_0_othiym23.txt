I don't know about the ioctl code, but for the rest, you should just be able to treat the tun device like any other readable stream, and use fs.createReadStream('/dev/tun', callback)