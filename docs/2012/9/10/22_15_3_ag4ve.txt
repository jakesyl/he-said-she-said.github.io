still either getting undefined or an exception