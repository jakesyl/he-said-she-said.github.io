protip never use sync code in a server event loop