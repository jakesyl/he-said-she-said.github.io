but really, at the end, the only way to truly *wait* for a function to finish is to use fibers and its libraries ( https://github.com/laverdet/node-fibers )