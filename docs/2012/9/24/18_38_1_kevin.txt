which is triggering before the if statement ends