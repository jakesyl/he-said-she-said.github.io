check out the examples on http://socket.io/ in a nutshell, you have two parts of logic: first, the incoming/disconnect (where you might want to add your "don't login twice, don't break for refresh", then the ongoing emitting to "listeners" (subscribers)