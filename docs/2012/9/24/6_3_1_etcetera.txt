but that objective-C impl looks like a good proxy for what I want to accomplish.