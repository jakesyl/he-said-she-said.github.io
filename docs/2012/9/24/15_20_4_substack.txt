simong: you can do something like var cons = []; server.on('connection', function (c) { cons.push(c) }); function destroy () { cons.forEach(function (c) { c.destroy() }); server.close() })