so the question is, how do you properly close the socket so it doesn't fire 'end' event later?