When you call `crypto.createHash('sha1').update('test').digest()`, you're using the raw output. Then you're passing it into a buffer, and base64'ing the RAW INPUT. Not the hex.