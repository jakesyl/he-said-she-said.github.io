basically, you map "identify" for every image to get info, then create a resizing queue ( https://github.com/caolan/async#queueworker-concurrency ) and push a couple of resizing tasks to it for each image.