is the missing step just a json_encode?