thl0: in readAndToUpper, just check if it's a function and throw an error before calling fs.read