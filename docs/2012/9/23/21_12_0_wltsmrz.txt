I had a solution for that some time ago using 'ws' module and connect-redis for sessions