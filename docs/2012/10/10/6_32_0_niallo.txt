odd thing is that test only fails half the time, feels like a race condition somewhere (run it a whole bunch of times)