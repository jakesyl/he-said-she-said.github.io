Slade- there are existing projects to do this sort of thing for you though, dnode, http://github.com/visionmedia/axon, node's core does this in a few spots