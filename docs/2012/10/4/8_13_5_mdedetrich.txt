if you don't want concurrency issues, don't use globals?