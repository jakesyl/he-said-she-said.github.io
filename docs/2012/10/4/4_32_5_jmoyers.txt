loop over an array and do a transform and return data, resulting in a new array