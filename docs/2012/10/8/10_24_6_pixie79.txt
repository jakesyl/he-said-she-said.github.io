well it did work before i tried to put the read into its own function