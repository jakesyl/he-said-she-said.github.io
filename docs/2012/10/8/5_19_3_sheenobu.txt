port of a ruby library