pixie79_: your fifo.create callbacks aren't firing by the time your code on line 38 is being hit.  You need to use an async library to manage that (or just nest the callbacks)