SoulRaven: does this not do what you want? https://gist.github.com/3825785