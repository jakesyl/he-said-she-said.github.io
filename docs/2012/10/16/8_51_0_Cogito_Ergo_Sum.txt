trodrigues but it would be better to run the event handler on a different thread so that while(1) loops or long running functions wouldn't be blocking