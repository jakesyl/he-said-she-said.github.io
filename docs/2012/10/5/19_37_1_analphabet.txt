If only ecmascript had python like generators, then we could implement coroutines very easily