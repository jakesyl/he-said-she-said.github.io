this could be easily solved by first creating the client and then connecting