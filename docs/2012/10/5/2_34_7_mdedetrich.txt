apply a function over every element in a collection