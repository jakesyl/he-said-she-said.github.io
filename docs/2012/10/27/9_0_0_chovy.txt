i was thinking storing the email in a db, and then having a cronjob check for pending emails every 2 minutes or something.