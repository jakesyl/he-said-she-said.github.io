ok, the short version is that you need to provide all the data to request at connection time, but right now you're providing it after the connection is already open