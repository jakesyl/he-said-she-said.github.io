that works fine if the l==0 check happens before the listeners finish, but not if they return immidiately