so the websocket libs all hack at the http server instance to insert their listeners in the right order