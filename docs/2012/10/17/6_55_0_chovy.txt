ok, i think it works, but i'm getting user from session, which is stale