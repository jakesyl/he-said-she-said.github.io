seems reasonable, except how do i get access to req object for a virtual attribute in the schema?