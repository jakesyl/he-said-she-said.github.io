you'll have to keep track of the state outside your writes