At the moment I have upload working. The problem is how to manage the download streams as the stream reader will get an end event as soon as it reaches end of file, but as the file is still incoming it's not actually the end of the file.