mike-d: mainly a state machine, yes, plus chat system protocol