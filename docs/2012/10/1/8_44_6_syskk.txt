where does app come from in this file if the module doesnt have access to the processe's global scope? https://gist.github.com/3810362