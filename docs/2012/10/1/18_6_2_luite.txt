this hs->js ast more or less consists of walking some intermediate representation of haskell AST, then outputting a simplified js ast, walking that again a few times to optimize it, and then prettyprinting javascript