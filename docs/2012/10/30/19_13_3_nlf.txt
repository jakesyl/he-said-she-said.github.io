when the queue processes, it adds an event listener, and writes the data