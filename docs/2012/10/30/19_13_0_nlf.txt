how i'm doing it now is with async.queue