anyone knows how to write a middleware pattern? i want to implement something like that for websockets