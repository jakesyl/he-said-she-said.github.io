Here's a working example of that kind of pattern phrearch https://gist.github.com/25b590e4592fdc387ff7