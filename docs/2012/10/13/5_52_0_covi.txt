How to make a function (or a loop) asynchronous? In my case, it's a loop that processes a bunch of data and appends each one to another list