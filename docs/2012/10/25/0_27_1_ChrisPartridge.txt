Leeol: gist your unit test, someone might be able to help further based off that