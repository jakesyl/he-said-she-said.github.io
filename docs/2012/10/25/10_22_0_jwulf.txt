is that your code? https://gist.github.com/3951807