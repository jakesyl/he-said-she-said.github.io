use <local> or <persistant> for the function template? btw, does it compile without the egl stuff?