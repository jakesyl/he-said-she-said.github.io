look at the common patterns, see api/addons.html