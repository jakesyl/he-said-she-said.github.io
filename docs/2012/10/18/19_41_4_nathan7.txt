benatkin: The router is not separated, the middleware order isn't clear