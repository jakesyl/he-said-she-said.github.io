the only thing that's missing is perhaps something like async/await