tomshreds: http://stackoverflow.com/questions/10545087/how-to-use-module-q-to-refactoring-mongoose-code/10554943#10554943