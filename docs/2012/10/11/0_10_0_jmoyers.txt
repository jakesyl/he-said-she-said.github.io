crockford's code is wrong