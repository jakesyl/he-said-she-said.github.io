http://pastebin.mozilla.org/1863718