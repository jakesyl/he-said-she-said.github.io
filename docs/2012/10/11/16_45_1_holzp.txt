I got it working but boy is it ugly