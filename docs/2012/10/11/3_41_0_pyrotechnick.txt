http://blog.datomic.com/2012/10/codeq.html