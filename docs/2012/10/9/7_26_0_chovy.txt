but checkPermission() is getting called twice, which makes me think I need to put return infront of it