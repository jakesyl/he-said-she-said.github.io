how does socket handle flushes?