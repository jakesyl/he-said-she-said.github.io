Now I'm trying to write the code which kind of decides on which pile to execute. In the end it should register the callbacks to the event loop and than register it's self so it can decide again.