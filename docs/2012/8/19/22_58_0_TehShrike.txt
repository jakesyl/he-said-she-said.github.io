The typeof syntax does seem a bit clunky to me, but if that's the only way to check if something is defined, oh well