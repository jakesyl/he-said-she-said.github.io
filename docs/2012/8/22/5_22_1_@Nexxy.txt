I think you should start with perusing the i2c-tools source