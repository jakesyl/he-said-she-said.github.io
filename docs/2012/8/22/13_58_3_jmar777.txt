jt2190: i don't like the idea of one middleware component setting a value on a request, and a downstream middleware depending on that. sets up dependencies that don't feel 100% right