all of the logic here is controlled by state, so we need to know what the state is