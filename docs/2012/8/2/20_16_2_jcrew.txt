the first parameter of callback is detecting an error and since it runs both functions in parallel it doesnt detect the error until it gets to write_file