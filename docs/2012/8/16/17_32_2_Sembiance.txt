tomshreds: look into using some modules to help, such as https://github.com/substack/node-optimist/