here is a tcp example, quite verbose as java code usually is