the connection event and placement of close handler is correct in my code.  i did a bad job of typing up the example.