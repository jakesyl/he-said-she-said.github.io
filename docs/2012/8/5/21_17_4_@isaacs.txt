reinventing posix would be easier.