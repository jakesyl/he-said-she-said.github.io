even if you can short-circuit an async operation, you should use process.nextTick to present an async-like interface