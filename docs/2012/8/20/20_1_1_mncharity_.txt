because of the way foo is written, the changes can only be made by modifying foo's source to permit them, and regretably that's not fixable.  which seems to leave two options,