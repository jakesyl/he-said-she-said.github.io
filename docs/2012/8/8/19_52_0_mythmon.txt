is it right to make an emitter, emit an event, then return the emitter? or do I need to put the 'emit event' step in a setTimeout to make sure the listener gets attached first?