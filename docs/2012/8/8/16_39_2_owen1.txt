the 'done' flag and the checkDone() function will make sure all the parallel functions finished their work.