which is, to be honest, worst piece of code I ever read