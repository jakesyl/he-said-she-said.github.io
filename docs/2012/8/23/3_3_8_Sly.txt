isaacs, https://gist.github.com/96685863e800a2667756#L13  -- Ignore 34-35, it's a change I made.