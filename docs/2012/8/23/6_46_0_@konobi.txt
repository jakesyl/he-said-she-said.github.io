the libc malloc/free can be rather different between platforms... but at least on smartos you could track it