i did this, passed the server into the function and var io = require('socket.io').listen(_server).sockets.on('connection', function (socket) {