ok, i'll try to do single function for dependant parts of code