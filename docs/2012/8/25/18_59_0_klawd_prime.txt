test.ifError({}); should throw an exception and testing should be aborted, no?