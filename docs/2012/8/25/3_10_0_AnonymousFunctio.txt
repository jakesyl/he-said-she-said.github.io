However... it is a bit buggy.  It's hard to synchronize the states of both sockets, error messages are lost, etc.  I'd rather simplify the process by swapping out the HTTP client in the first place, if possible.