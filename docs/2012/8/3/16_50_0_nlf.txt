then on end allocate a buffer of the final size and loop through the array copying the buffers to the correct locations