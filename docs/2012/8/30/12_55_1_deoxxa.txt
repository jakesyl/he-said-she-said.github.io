you might want to send a request saying "hey can i send x, it is y bytes and of z type", then wait for a "yes" or "no" response. upon receiving the response, you start sending the file.