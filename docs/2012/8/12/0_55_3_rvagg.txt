some things should be nextTick, some things need to be immediate, keeping multiple state variables is also annoying