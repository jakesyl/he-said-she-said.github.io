suggestion: use async.js and everything is easier