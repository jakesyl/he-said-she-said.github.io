is there a middleware way to do this?