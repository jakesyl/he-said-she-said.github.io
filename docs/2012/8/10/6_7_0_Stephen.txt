Second: Use the "drain" event on stream to know when it's safe to start reading from the array and writing again