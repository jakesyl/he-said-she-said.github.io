My understanding is you write code that works with both the old and new data structures, preferentially with the new ones, then do a pass through duplicating the old data into the new, then delete the old ones, then delete the code for dealing with the old ones.