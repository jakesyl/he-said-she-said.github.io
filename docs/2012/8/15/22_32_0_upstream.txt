Can someone take a look at this: https://gist.github.com/3364308