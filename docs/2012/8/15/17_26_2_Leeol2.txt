I am doing something similar, but i would prefer to not use global