anybody know why my stream is closed in this function? 