our app was a massive mess with routes defined inline