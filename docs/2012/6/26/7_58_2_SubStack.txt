but only when write() returns false