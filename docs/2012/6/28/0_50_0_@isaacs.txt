bradleymeck: i use a state machine for node-tar