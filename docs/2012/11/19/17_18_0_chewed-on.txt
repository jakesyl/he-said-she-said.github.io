It seems like some asynchronous feature is kicking in, my for loop on line 220 didn't get to execute finish before line 193 where I call pushNotification() function kicks in