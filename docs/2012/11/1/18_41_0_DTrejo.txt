I recommend breaking it into two functions