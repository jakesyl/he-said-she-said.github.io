the generated code looks like a pile of crap