please critique my code http://pastie.org/5434194