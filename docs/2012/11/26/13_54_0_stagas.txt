is there a session middleware that doesn't suffer from race conditions?