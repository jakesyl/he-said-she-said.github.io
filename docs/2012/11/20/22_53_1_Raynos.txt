Its the most ugly code ever