for me, if the user didn't exist in my local db passport would return a 400 error. so to force sign-up i created an error, tacked a .profile on it and done(err), then i have a middleware after to handle that