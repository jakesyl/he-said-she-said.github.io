is there some easy way to make some callback make synchronous? eg. wait until the whole underlying callbacks are processed?