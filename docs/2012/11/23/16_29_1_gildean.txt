simong: you can at least tell the amount of bytes written to the buffer