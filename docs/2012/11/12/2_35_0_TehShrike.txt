If you accept some handwaving above that pseudo-JavaScript, anyways