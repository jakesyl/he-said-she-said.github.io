Am I using socket.io correctly?