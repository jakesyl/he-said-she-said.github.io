why not take a look at the source for the connect static middleware then?