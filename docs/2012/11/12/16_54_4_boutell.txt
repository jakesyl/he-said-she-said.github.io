sethetter: cool. If I had it to write over again I'd use nunjucks at the template engine. But the advice in there about setting up modules and using async.series to avoid the nested callbacks of death is definitely suitable.