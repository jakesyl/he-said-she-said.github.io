I knew async could do it but didn't think to check its source