Nopik: Its a difficult problem. In order to know if all TCP sockets are done with their HTTP request and force close them after a timeout you will have to store them in an array, that could be memory consuming (I don't believe it is that bad as long as you remove them when the TCP connection is closed).