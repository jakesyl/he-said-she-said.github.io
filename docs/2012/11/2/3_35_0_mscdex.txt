and check err in done first