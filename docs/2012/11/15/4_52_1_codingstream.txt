Hotroot: if your code feels like its turning into a boomerrang visually, there is some handy stuff in https://github.com/caolan/async that can make it more procedural