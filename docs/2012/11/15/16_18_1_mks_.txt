(assuming that you still want to roll your own lib)