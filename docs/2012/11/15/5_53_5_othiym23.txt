functional tests that model actual usage scenarios make a lot more sense