niggler: for __LINE__-ish behavior, you could look at how lib/assert.js gets the caller stack