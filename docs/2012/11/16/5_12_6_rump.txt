count is async which accept a function as last param