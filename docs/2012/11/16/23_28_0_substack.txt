var split = require('split'), through = require('through'); process.stdin.pipe(split()).pipe(through(function (line) { console.log((i++) + ': ' + line); if (i === 10) this.emit('close') }); process.stdin.resume()