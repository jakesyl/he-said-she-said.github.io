do I have to kind of free the state of my program and supply some kind of continue callback function?