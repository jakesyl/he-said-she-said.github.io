xp_prg: you register callbacks with asynchronous apis