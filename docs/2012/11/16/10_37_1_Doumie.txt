the problem is that the code after [].forEach is ran before the forEach finises