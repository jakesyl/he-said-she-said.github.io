xp_prg: this is how you would implement the code you posted: https://gist.github.com/4092024