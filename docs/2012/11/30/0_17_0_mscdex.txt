mmalecki: length is still checked though, before malloc even happens