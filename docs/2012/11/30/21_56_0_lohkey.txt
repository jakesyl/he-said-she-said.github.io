ktk, if you're worried about deeply nesting, then use a concurrency lib like async: https://github.com/caolan/async