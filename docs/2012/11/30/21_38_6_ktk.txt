ok regarding my question, that's some dummy code (not complete): http://pastebin.com/NLSV8hqV