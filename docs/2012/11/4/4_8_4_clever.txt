the old code relies on that being async