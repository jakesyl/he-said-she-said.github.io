to get around this, i added a stack, and pushed items on the stack, and popped them off when the callback has completed (i called fs.stat to determine it was a directory)