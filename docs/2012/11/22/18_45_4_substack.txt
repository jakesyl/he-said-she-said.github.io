and then it does a bunch of confusing magic to share the fds