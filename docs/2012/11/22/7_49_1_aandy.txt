not as a real answer to your question, but you could also use eventemitters. so your get_directories would go through the root and emit whenever an item is a directory