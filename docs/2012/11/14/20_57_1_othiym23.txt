pppaul: I think what gildean is asking is, why aren't yhou just passing the app into your module (where you have magic_deps now)?