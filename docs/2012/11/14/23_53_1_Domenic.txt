Promises solve all of this so that's what we use. Not for everyone though obviously, since I guess Node core is pushing domains as the idiomatic attempt-at-a-solution.