a roboust isEmpty is a bit more complex