I actually use something like domains but way simpler, because I have control over both ends of async calls (thanks to heinous abuse of monkeypatching)