actually i have run into issues with variable shadowing but i figured it out. its not too hard