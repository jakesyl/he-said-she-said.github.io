compiling to different module specifications (amd, commonjs), compiler services, ES3 and ES5 specs, and generally simplifying everything