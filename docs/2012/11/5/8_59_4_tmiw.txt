figured out my problem. turns out var self = this is useful