The memory gets pretty massive if you have a different function for each element