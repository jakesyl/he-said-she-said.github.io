That anonymous function in Javascript is really hurting my head lol