definitely nothing to do with it because now that i've taken out all the code that does the write on it's own (without the rest of the logic), works fine