perhaps implemented as a preprocessor