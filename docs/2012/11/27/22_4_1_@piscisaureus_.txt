we could just pthread_signal the reading thread