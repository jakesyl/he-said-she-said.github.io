var p = new Promise(). p.done(delayedCallback); setTimeout(p.resolve, 1) ?