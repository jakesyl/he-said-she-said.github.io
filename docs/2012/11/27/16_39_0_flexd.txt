Uh, could someone tell me I am doing this in a very stupid way? https://gist.github.com/c2907fc057acb4c023ce