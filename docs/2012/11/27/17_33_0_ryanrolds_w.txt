flexd, It looks like you're calling r.end(). I don't thin you need to do that, it should emit 'end' on it's own.