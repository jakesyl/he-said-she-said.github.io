and providing a nice dsl for it too