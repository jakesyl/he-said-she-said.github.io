the problem here is that callback throws an exception that is not catched by assert.throw...how am I supposed to test that exception?