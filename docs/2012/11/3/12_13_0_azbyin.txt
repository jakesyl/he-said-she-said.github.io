uterian, your line 18 should be within the closure which ends on line 17!