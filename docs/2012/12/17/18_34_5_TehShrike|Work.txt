daslicht: doesn't this do that for you already? http://nodejs.org/api/url.html#url_url_parse_urlstr_parsequerystring_slashesdenotehost