FunnyLookinHat: we're relying on selenium webdriver. that handles ajax as well as popups robustly nowadays.