and it'd be nice to let people use throw instead of the callback because it stops execution immediately