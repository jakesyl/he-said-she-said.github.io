I've never tried to write one, I don't know what the usual architecture is