http://pastie.org/private/bscwuuqrrfspg1gblziirw hmm, how would I access the buffer & encoding values within the read_file function? as-is it doesn't work