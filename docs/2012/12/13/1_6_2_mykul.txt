i had my http.get call inside a callback for a 'when' deferred