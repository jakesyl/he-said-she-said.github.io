Or consider maybe your logic is broken if it won't work in a number of different cases, including as a system-wide library