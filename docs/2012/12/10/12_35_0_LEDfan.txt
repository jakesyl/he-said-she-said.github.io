Like as I said, the code is a mess. But don't worry, the code I normaly write is much more readable. The indentation is indeed not at its best, but I don't like anonymous functions. 