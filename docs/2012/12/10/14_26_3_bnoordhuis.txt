well, one day js will get coroutines/generators