using setTimeout for processing each array element in order to prevent blocking seem expensive and a broken way to achieve such thing, but is recommended through a few people on the internet