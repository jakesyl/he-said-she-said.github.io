Am I going about this all wrong by using dnode and event emitters?