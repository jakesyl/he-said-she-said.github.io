isaacs: one thing that was tremendously helpful was throwing a print statement on every place in the code that enters or exits a domain.  could be useful as debug-level output