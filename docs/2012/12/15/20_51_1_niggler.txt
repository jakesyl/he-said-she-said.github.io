javascript scoping is somewhat painful