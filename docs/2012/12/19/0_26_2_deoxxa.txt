it becomes a lot simpler once you separate the protocol and the logic