please note: that's awful awful code, and messing with callee and __proto__ is awful, but i don't know of a better way.