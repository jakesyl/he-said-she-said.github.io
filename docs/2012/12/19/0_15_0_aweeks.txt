I've run into an issue which seems to be somewhere between a bug and a feature:  If you send 304 HTTP response, and set the Transfer-Encoding header, then an empty chunked body is sent.  This response (with the 0 terminating the empty chunk) is in violation of RFC 2616 (http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5): "The 304 response MUST NOT contain a message-body, and thus is always terminated by the first empty line