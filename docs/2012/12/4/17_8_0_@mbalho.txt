integration testing is always messy