tnorris: if it's 2 or 3 or a few other special numbers, you can switch to using bitops