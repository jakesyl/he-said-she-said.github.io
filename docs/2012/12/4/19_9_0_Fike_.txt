In the vm module, how to I prevent infinite loops?