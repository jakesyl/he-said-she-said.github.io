creationix: well as long as the switch logic is self contained it should be ok, i like to do my state machine and then separate out the states into functions have state = myStateAction(), its pretty easy to generate