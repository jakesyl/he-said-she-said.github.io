what's really causing the problem is that ssh2 uses a window for data transfer, and if the window reaches zero you have to wait for the server to say you can send x bytes more