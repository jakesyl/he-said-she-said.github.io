Industrial: I think you should register them in a global tree. so everytime an event is added, add it to the tree of the parent. than you can easily create a JSON out of that information