what's the best way to do an async operation on each element of an array?