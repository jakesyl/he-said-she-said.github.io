well it KINDA works.. i have to return true to bring up the alert asking if the person wants to stay on the page or not, gives time for socket.close() to work, but if they say no it's not good enough heh