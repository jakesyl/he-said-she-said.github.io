although personally i'm ok with next() being in global scope