please help debug/fix this: http://pastie.org/5530456#17,19