as proper as you can get with javascript