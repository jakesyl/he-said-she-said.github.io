it does an http handshake, then chooses what transport to use