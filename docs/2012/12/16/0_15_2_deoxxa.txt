your function is middleware, technically