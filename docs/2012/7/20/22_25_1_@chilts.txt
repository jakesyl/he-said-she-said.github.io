though I haven't used protobuf or thrift I'm afraid