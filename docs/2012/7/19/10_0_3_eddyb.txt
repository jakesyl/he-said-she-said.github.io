so if you were to have a modified node.js API with Deferred support instead of plain callbacks