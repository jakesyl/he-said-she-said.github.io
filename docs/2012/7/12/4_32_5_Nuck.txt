socket.io needs to be broken apart