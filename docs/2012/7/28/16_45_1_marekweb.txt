Reading the source of Express has been pretty enlightening