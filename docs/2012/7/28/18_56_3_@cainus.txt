that sounds like connect's middleware exactly...