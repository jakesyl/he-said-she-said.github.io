I think the main issue is I don't actually understand any of those 5 website I looked at. e.g. the inner: return (function(number,i){process_lookup(err,obj,number,i);}(number,i));