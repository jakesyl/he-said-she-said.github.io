So, for control flow, I've used the array of functions, but created an implicit context.