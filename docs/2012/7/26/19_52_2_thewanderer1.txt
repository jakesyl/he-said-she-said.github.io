creationix: thanks... I'm not quite clear as to why it can't access variables that live outside, but I'll just pass them down the stack