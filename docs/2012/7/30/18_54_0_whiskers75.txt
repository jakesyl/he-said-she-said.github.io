@isaacs: but what if cmd becomes ('another bit of data\n') ?