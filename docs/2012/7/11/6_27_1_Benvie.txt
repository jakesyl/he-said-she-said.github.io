and reorganized the whole source tree around enabling embedders