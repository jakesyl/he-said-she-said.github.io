tim_smart: just curious, won't that fail if there are multiple connections at the same time, or will a new buf array be created for each connection?