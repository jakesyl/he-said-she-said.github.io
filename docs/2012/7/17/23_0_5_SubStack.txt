the way socket.io does it is actually pretty limited