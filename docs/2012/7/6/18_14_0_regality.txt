it seems like connect may have to be aware of domains, and run do something like domain.run(layer.handle) or whatever