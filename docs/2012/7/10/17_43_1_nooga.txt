aheckmann: https://gist.github.com/3084757 line 31