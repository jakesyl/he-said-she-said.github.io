http://hastebin.com/tewadunabe.vhdl