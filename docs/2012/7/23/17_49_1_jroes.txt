I understand your approach from a whole-system integration test perspective, but I'm thinking about unit tests