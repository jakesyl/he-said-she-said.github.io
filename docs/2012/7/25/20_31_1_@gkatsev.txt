the ryan_opper code is in a gist somewhere