could you not calculate the file size as you read it and pass that value?