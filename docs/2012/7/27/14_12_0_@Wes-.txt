yanush: I know nothing at all about node.js, but if this was a C application, I would immediately do a syscall trace (truss, dtruss, ktrace, strace depending on OS) and follow the file descriptor that is triggerring EBADF back to the source.   That technique would work in Node, too, if you are sufficiently familiar with C programming and Node internals.  Make sure you trace all threads and...