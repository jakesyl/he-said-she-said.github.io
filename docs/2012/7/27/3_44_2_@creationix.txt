C doesn't have closures, and as such, callbacks are hard in C