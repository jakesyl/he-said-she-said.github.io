ttps://gist.github.com/229931 reduce implementation as per MooTools