Somehow, I need to keep state for every invocation of a lacing function:   lace(function(){ /* within this invocation, lace.next has the right index state */ lace.next(); })(function(){ /* this invocation also has the right state */ })