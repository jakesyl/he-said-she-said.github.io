my code works fine in repl