samholmes: https://gist.github.com/3162008 simple naive implementation. more complex safer implementation https://gist.github.com/3162033