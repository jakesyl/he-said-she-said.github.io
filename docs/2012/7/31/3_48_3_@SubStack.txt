jrajav: it's just really hard to write clean abstractions in c