pringlescan: you can either divide your logic out into named functions and use those instead of anonymous functions OR use a flow control module (if you go this route i recommend caolan's 'async' npm module)