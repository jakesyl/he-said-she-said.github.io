https://github.com/luvit/luvit/blob/master/examples/fs-coroutines.lua