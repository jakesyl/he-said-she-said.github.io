C++ might actually be worse than C in this context