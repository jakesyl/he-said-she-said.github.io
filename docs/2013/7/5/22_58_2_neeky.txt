do transactions in the controller, no the model, problem solved