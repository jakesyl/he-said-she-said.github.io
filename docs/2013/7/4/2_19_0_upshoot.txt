Here's the gist again: https://gist.github.com/anonymous/5924253  (with comment added below)