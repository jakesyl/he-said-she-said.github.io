hichaelmart: i don't know how can handles write() errors