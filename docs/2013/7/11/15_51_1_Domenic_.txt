kenperkins: this one is pretty real-world actually. My coding style is a bit crusty, e.g. this is from my AMD days, but the concepts are sound. https://gist.github.com/domenic/1604916