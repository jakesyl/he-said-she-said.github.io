generators work with either callbacks or promises