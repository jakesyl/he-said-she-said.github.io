http://substack.net/shared_rendering_in_node_and_the_browser