in the same way socket.io works, but I can't figure how it does it's magic