maybe it was a side effect of the async library itself but i had some real issues mixing sync and async code inside async loops