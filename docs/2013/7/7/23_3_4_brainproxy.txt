works in browsers and node.js