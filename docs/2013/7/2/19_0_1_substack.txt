dylukes: you can pass write and end functions into through: through(write, end)