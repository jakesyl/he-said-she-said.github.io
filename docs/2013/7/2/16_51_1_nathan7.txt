dylukes: a emits 'end', pipe magic calls b.end()