i pretty much just copy/pasted node's http agent code