and i like the sinatra style middleware pattern