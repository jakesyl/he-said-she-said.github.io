move the walk bit to User.prototype.walk = function(map,x,y){...}