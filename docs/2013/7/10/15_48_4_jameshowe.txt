in every callback you have if(!--waiting) doTheLastThing()