alasi: the way I wrote it is straight from the socket.io docs