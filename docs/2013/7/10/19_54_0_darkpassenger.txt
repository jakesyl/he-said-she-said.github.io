why does this code (http://pastebin.com/3zDTwdQk) always return an error ? 