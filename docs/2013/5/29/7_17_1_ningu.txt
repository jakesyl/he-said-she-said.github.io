is there a reason you aren't just doing window.onload = mainObj.init?