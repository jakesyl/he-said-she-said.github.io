eddyb: you should write a module that does that