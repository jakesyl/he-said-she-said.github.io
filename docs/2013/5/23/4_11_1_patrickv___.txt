but how can I efficiently process when to timeout?