ideally, it would be exactly like it is now, except the process is running inside the current process, and not outside as it is now