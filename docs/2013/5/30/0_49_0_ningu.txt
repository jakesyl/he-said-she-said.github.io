xanadu: I would look at the bodyParser code to get some ideas