i can modify it to use callbacks