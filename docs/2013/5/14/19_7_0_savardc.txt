thanks. that part I'm ok, it's getting the value from stdin in the right encoding that I'm having trouble with