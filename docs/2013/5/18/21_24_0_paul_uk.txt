is there a way of exiting an async loop when res.on("close"  gets fired?