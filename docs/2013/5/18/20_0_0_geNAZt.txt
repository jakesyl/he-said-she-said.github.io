and if (restToRead < chunk) chunk = restToRead;