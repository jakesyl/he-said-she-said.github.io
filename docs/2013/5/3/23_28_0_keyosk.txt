Not necessarily related to the issue, but would you want to perform the heartbeat(client) recurse call of the heartbeat function within the getHead callback function?