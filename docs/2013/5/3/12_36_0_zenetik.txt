i've updated the gist with some comments