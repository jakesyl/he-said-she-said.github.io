blah, if zmq had callbacks it would be perfect xD