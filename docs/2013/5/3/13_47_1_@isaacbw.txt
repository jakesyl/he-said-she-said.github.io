DiegoMax: I only glanced quickly at your snippet, but it would be better to define a behavior-driven external API (your exports) rather than just put out an array object