HSL: my patch broke other things