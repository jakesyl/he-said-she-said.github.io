promises would be way cooler in a language with operator overloading