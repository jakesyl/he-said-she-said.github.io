I feel like somebody should reimplement d3 in terms of streams. That would make a lot of things clearer, maybe