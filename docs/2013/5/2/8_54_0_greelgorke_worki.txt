the user of the lib can provide async commands and sync procs procs, 