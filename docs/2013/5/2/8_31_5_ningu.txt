DiegoMax: it's just a function that runs in the middle of a chain