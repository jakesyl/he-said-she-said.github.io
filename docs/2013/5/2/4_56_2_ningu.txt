splitting off the different connect middlewares seems like a decent idea to me