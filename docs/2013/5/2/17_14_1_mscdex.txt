owen1: you can always use something like flock() to avoid race conditions