creationix: admittedly the promises in core were implemented rather awkwardly :)