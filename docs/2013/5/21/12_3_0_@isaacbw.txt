save a closure somewhere and call it in the socket.on('data') handler