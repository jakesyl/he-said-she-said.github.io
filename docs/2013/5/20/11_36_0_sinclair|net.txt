Havvy: how do you manage complex callback logic?