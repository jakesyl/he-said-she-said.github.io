Using the request module, you can do a req(url).on('response', function (res) { // then pipe }). Inside of the response callback, would I be able to grab the first few bytes of the response data and see if it's json or csv?