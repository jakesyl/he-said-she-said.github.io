any better solution to refactor?