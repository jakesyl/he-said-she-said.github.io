so it doesn't continue the loop until the db query has finished