ok ill restructure this php and then port again