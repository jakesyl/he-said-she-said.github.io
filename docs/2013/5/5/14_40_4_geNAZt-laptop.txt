the unrefactored and the refactored way