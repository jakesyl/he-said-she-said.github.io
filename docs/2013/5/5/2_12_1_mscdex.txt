essial: https://github.com/joyent/node/blob/v0.10/lib/buffer.js#L706