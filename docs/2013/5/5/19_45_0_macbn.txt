how to make a blocking function