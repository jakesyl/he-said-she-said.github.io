http://stackoverflow.com/questions/5050265/javascript-nodejs-is-array-foreach-asynchronous