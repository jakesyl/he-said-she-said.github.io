Has this already been done? https://github.com/dilvie/ofilter