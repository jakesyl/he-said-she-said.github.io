https://gist.github.com/nathanaschbacher/26daef4a3ad84c2ff1a9#file-leaky-js-L22