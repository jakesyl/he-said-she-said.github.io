eddyb9: that's a candidate for an IIFE