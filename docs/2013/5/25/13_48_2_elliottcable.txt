Like I said: you'll have to adapt it to your codebase.