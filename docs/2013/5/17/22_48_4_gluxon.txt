It's ugly because this is code that doesn't need to be async.