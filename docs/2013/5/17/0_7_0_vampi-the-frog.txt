I just made my image resizer with gm, you can basically request /files/foo/jpg and get the full size image, /files/small/foo.jpg to get a smaller version, /files/thumb/foo.jpg to get a 50x50 thumbnail. They are cached for faster serving afterwards ^_^