this version with a for "could" be faster: http://hastebin.com/dofelixuve.js