some control flow is genuinely complex and can't be made not complex