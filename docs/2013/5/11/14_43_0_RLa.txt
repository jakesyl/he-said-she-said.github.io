it expects serialize/deserialize functions