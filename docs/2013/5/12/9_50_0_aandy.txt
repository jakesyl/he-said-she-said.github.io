which is a good example for what you need (bayesian filtering). it was practically built for those types of lookups you need