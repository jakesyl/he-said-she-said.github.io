http://pastebin.com/XNaZvhF5 <-- TS does make stuff more readable