ningu: I think that's a pretty common way of doing it with middleware