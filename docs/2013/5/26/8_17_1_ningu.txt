I like connect's chaining architecture, and in most of my apps it works well to have a series of functions that are called preceding the route