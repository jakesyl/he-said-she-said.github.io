new version. the thing that confuses me is how to get the result from the callback