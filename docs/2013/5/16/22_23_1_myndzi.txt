with a final callback to do something with the result