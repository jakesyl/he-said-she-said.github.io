server side will emit three events