zapu wrap the entire thing in a function