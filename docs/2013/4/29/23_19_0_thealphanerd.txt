take a look at this https://github.com/TheAlphaNerd/interface.js/blob/master/server.js