another problem is that you're reusing the "readPromise" variable