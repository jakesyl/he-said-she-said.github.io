but I wasn't really asking how my code is wrong as much as I'm asking what the right way to do this is