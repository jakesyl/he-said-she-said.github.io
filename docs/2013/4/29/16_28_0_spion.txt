I think what happens internally is something like this: var module = createNewModule(...);  (function(require, exports, module) { /* module_contents_goes_here */ }(module.require, module.exports, module)); return module;