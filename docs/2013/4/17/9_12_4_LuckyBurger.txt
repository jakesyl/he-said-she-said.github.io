i think it waits for all callbacks to be completed?