is it bad code or am I doing something fundamental wrong?