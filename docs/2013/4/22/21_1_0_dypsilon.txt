is there a sane way to manage singletones with require() ?