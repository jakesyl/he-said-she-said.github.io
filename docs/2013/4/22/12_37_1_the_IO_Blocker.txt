http://hastebin.com/rufajakemi.vhdl