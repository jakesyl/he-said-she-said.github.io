am i missing something? because i thought server.close was async and therefore the listen should be nested inside the close