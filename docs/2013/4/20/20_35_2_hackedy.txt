example of my weird flow control: https://gist.github.com/hackedy/5427292