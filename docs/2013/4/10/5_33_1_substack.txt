but when it comes to testing, everybody uses globals everywhere