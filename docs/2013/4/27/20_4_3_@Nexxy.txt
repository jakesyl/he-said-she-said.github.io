put the functionality into separate functions