make your library take a callback function