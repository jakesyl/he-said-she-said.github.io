The docs for readline's close say it should trigger when its stream recieves an end event