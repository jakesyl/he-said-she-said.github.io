Technodrome: If you set up your query in middleware, you can add the data to the request object and then call next() inside the query callback. Then when you get to the template processing middleware, you know your data is already there.