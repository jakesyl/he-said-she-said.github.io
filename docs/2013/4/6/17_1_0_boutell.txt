basically: don't ever treat require's "caching" as a safe way of implementing singletons. Get used to passing context objects explicitly.