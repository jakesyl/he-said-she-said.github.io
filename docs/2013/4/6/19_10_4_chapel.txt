there are a lot of ways to handle that logic, promise isn't bullet proof