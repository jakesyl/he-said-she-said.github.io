looks like I have to watch for 'close' events, not 'end' events, on an output stream