take a look at this example here:  https://github.com/pquerna/node-extension-examples/blob/master/helloworld/helloworld.cc