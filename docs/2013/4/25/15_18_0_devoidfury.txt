aszeszo: in that pattern, you should also switch to the async fs functions