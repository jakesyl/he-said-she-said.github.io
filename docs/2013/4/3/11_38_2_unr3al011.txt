the loop processes 500 times and then its finished