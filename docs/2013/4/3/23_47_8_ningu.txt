and getTrainedSamples will have to take a callback argument to be called when both db queries are done