samholmes: while and for loops don't play nice with async IO.