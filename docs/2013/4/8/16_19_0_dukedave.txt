Could someone give this a once over for me: https://gist.github.com/dukedave/5338014