you can do this with middleware by adding the socket object to the request