werle: i got this far: https://gist.github.com/ashnur/5421082