it looks like a deadlock, but it should work