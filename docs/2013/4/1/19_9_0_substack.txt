promises are too high-level for core