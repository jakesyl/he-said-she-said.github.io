someone should write this in node - so that it can be x-platform