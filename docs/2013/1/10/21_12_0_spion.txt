mikola_, here is a stricter algorithm that I usually use: if (a.f(b) === b.f(a) || a.f(b).f(c) === a.f(b.f(c)))  { f(a,b) } else if (not_pure_function(f)) { a.f(b); } else {  pick_consistent_option({preference: a.f(b)}); } - but I'm not sure if its great.