isaacs, so: 1) add lock() on tarball in unpack(), 2) don't call unlock directly from npm, 3) keep track of whether we actually get locks and 4) stat() and unlock() need to be synchronous in lock() :)