or your top level function could take a callback