just do what you were originally thinking and have an object that maps session IDs to user id and socket