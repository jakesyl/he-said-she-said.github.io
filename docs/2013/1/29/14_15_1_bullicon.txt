should url.parse be in a calljback ?