Looking at this code: http://pastebin.com/kNSer1Fs