How do I make the function return an error? "return error;" doesn't work