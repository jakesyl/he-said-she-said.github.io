Zak: it's ugly, you need to wrap each module with function, in CJS you write as if you were already in a wrapper