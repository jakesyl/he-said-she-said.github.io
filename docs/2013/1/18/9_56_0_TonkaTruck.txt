Looking at socket.io's store/redisstore I can't quite determine how they're doing this.