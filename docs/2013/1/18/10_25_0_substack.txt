amd is just about the ugliest and most awkward looking way I can think of to reuse code