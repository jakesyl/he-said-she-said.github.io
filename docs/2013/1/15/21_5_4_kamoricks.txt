I'd just extract the "update" bit to a function, and then if/else it.