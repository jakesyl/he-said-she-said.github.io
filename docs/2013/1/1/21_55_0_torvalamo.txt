thl0: one way to do what you want is just to use the same 'data' event handler for both stdin and the file stream...