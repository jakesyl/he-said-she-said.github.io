I think that encodeURIComponent should change "'" to %27