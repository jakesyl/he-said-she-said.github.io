Could I get help with this weird async behavior? https://gist.github.com/4447996