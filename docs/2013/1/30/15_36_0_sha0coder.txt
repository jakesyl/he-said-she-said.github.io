what i need is while (!semaphore) {} ;)