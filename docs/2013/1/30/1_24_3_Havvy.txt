One of these days I'll convert to Coffeescript...