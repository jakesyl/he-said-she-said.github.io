example in CoffeeScript: https://gist.github.com/1ea10032eccd575b431d