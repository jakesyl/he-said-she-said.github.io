cxreg: if you find a moment, leave me a fuller explanation on the PR of what you think the bug is wrt leaving the domain, because I'm not sure why a domain propagation in a library call should have to know about entering and exiting domains explicitly