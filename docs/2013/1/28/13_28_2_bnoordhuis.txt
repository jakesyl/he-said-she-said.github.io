we need to serialize all writes because the write() and pwrite() syscalls are not thread-safe on os x :/