edit to use whatever framework you're using's normal mock/stub/spy approach