Here's how I'm thinking it could be done in a unobtrusive way: Make a npm "modes" that define the folders that npm looks for in order to resolve require()'s, so you could put testing dummy modules in .test_node_modules and still keep production modules in the normal .node_modules