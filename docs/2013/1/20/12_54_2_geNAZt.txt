why dont u pass a callback into this function code and let it execute if the array is full ?