closures solve all problems in js. if you have identified the function call that causes your program to behave in undefined ways, but not what exactly, just wrap that function definition in another function that returns it as an anonymous function but closes over the needed variables