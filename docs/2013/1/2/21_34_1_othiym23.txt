the sanest way is just to generate a string for each migration and store that in a "migrations" table, so you don't have to worry about the dependency order too much