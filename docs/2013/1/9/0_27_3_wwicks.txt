I thought it looked like it just called val->ToString() so I tried to simply do crypto.createCypher('aes256', theBuffer.toString()) but the new updates convert that to Buffer(str, binary')... it looks like it makes it to DecodeWrite in node.cc where they added a special case to handle buffers and it was a dead end.