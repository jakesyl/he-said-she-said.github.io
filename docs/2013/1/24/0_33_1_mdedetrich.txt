iterating over an array in parallel