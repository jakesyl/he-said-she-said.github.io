mutable state is a non-trivial problem, imo