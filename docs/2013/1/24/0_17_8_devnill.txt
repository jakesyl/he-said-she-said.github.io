I feel somewhat dirty with a while loop