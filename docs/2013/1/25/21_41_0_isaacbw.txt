basically I have a set of routes that should all fail if the server isn't in a certain state, and I want middleware that will check that state first so I don't have to duplicate the test in each route