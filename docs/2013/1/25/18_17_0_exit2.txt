any advice on a better way to write this to check if socket exists? https://gist.github.com/4635978