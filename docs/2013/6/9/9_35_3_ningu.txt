and it writes the http header response before the pipe, too