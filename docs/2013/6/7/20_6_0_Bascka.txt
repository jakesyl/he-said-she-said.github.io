I don't really know if this is possible, or if i would be better of writing this in C...