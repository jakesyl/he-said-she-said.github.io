a giant switch statement in a while (true)