Anduck: part of your problem is that javascript has function scope, not block scope.