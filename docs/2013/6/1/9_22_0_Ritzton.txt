if the visitor is going to http://www.domain.com, the javascript client side is still var socket = io.connect('https://domain.com:3000'); and session dont work but if he is going to http://domain.com, it is working