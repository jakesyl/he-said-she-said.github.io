xyxne: promise libraries give you that, with a separate function.