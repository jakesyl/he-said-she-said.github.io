ok, so I've figured out that v8 is actually optimizing the routine.  it is just doing a shitty job at it