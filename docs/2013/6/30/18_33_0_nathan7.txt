or you could just have callbacks for things and use async..