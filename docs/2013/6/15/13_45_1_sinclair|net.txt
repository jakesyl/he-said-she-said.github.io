barinovmaxim: personally, i would not bother with diffs, i would submit the document back to the server in its entirety, and have a "last in wins" policy