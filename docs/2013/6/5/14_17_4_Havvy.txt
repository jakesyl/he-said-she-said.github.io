dylukes: function whenAllPromises (promises) { var unfulfilled = promises.length; var finished = new Promise();  promises.forEach(function (promise) { promise.when(function (res) { if (--unfulfilled === 0) { finished.fulfil(promises); } }) }; return finished; }