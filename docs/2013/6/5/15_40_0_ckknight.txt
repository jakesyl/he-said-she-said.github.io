locy: by using asynchronous patterns everywhere