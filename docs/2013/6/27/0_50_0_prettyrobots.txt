I converted all this from Streamline.js CoffeeScript to zero-dependecy JavaScript.