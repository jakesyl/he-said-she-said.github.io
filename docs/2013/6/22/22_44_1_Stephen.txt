It uses a Flash fallback after websockets, then XHR, then long-poll