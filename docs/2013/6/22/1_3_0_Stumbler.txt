which I ended up using sips and imagemagick for in the end