nathan7: if you are still interested; I removed the subclasses and I separated the state definitions and made slaves inherit the master definitions: https://gist.github.com/Industrial/760ba4e7cb7142ef406f/c8ba1809c13e9190408a29d05abd4c758e1ccd46