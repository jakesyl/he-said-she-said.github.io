I have a function that makes an http request but doesn't return anything and I can't end the connection until something is returned.