function hash_file(algo, path, cb) { var hash = crypto.createHash(algo), s = fs.ReadStream(path); s.on('data', hash.update.bind(hash)); s.on('end', function(){ cb(shasum.digest('hex')); }) }