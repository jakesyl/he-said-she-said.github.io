both server and client side code