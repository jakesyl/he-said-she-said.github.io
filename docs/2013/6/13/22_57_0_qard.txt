I can queue up future writes when the socket becomes dirty, but on that final write I won't know it's dirty until after the data has written to the socket and failed.