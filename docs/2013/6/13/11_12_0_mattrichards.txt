ningu: sure, that totally makes sense.  What I can't figure out is that when I unit test middleware, in isolation, res.send() _never_ gets called from within the promise failback.