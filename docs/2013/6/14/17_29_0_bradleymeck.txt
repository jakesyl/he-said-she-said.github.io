writing a good object walker for validation on union types is difficult