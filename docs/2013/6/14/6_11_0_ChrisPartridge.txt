might be worth looking at magnode from AAA_awright