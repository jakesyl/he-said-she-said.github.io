my lesson for the day: closures in perl may have the same semantics as in js, but they are wayyyyyyyyyyyyy less optimized.