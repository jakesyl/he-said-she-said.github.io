while the success callback is where most of the code is