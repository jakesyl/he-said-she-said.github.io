@isaacs - my high level question is "how do you get a known good set of node_modules on your production boxes", it seems to me "npm shrinkwrap" isn't safe and you shouldn't use it in prod and checking in node_modules is the way to go but actually figuring out what to check in is not easy i.e. http://blog.nodejs.org/2012/02/27/managing-node-js-dependencies-with-shrinkwrap/#note2-top  