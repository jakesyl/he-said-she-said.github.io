(the io function argument was not needed)  http://fpaste.org/vuyQ/