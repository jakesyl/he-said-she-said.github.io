if-else mess isn't an easy thing to read