the sync version, in c++ pretty much does Work and AfterWork in one