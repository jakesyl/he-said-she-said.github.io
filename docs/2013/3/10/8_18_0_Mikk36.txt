Having a bit of a trouble here, trying to handle both ascii and utf8 input simultaneously