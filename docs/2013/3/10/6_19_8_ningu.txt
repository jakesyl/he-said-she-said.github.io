adamramadhan: what i would do is, in on('record'), push row[1] onto a global array. then in on('end'), use one of the methods from caolan's async module to do the dns lookup.