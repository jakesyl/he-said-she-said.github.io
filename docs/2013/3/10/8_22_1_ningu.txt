but encoding detection is not simple