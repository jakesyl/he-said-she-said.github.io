howcome last is undefined here?