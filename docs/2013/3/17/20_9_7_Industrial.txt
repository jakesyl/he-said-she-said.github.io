All this code does what it says (to me): https://gist.github.com/Industrial/1ca7e30da1f5e69b4b9c/7855875f1845189d6ff0febb4b0c4aa61e2b6285 but I still don't understand how to make PortClient#register/unregister/query asynchronous.