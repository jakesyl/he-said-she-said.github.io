maybe there is a more C++ way to do it