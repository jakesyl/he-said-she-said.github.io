ie, var promises = data.posts.map(function (post) { … var p = new Promise(); request(function () { … p.resolve(); }); return p;); when(promises).then(doStuff)