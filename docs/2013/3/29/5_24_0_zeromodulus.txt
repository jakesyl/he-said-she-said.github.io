Paccc: In other words, call connection.query() in the callback of connection.connect(). That will ensure that connection.query() is executed *only* after a connection has successfully been made.