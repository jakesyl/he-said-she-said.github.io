heath: https://github.com/joyent/node/issues/5130 for example. feel free to steal it