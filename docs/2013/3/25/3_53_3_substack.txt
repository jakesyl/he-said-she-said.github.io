stdin is line-buffered when it comes from a tty