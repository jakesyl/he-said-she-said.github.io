ChrisPartridge: so you say // mw.authorizePrincipal and then in your route you pass mw.authorizePrincipal in.. but where is that function actually defined?