It only has to run once per request... so I don't know why it wouldn't work the way it is