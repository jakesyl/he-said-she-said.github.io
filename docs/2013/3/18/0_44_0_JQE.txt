calling the function inside the tcp server does not