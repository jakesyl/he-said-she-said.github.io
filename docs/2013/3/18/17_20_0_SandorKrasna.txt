it works when im not calling it from the io.sockets.on function