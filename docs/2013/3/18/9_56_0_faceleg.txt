for a function that creates an event and then emits on that event inside internal callbacks