but this requires me to pass the response object around to all the functions