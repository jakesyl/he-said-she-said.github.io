i wrote this example for socket.io and connect just a couple of days ago to answer someone asking for something similar, idk if it would help: