add oldContext = oldCanvas.getContext("3d"); and change oldCanvas.putImageData to oldContext.putImageData