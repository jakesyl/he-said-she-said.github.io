the worst offender IMO is the variable scoping