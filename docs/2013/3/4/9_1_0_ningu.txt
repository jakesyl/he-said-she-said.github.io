SargoDarya_: so it turned out that, instead of calling the callback twice, I was actually *not* calling it since, unbeknownst to me, listening to 'end' and 'error' on a socket was not enough -- I had to listen to 'close' instead of 'end'.