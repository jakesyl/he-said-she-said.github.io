might want to use type or hash instead of which, which has some oddities 