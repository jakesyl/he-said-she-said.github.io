asdf12: you need to trigger a callback instead of while (go) { ... }. call it instead of setting go to false