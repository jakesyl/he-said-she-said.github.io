I think the real solution for all this stuff is DTrace, but using DTrace is like writing code with monads for me -- spend like a day figuring out exactly what it is I want to know, and then like 10 minutes writing D