mikeal: https://gist.github.com/eurythmia/92d3e34033326f0534a2