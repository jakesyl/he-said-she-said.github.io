was trying to get by with feature testing but there's a number of cases where that doesn't work