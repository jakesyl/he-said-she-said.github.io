d2dchat: it's substack's lib with a few changes