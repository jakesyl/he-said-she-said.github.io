d2dchat: https://gist.github.com/tony-o/5248593