ljharb: thanks for the advice, I'm going to think about it over lunch. Immediately I like the concept for obvious reasons. I don't konw if I want to do the refactoring required to use promises at this stage, partly because I don't know what it would involve, having no experience with them