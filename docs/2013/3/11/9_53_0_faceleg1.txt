ugh so much of this lib is sync