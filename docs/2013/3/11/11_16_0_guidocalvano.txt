I don't entirely understand your pseudocode