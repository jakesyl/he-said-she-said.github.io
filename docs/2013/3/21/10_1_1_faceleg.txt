message & code should be defined