i have multiple socket connections, I want to wait for all of them to close before sending a json result set back to the client. how would I do that?