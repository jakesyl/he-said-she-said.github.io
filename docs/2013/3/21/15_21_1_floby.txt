woopwoop: or just a counter. Every time you open a socket you increment it. everytime a socket ends you decrement it, and when it reaches 0 you're done