Error comes from the last return statement