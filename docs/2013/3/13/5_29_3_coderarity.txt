use a mix of lambdas and named functions