johannesboyne: injecting it via closure feels like it makes testing easier, but i'm not sure if it's the right thing to do