i have a race condition I dont know how to solve