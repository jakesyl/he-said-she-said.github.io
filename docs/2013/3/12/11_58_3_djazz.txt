https://github.com/daniel-j/node-two-phase-algorithm