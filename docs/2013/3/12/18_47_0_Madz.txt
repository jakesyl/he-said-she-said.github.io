Javascript seems like a nightmare to pass data around in