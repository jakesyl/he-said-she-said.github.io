oh, you said above that baton->sha is const char*. so actually it doesn't really matter, you can just malloc away.