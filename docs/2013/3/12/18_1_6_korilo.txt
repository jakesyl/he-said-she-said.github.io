if promises can help then go with q or deferred (https://github.com/kriskowal/q)