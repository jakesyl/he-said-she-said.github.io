and newitem function needs to reside outside this nesting function?