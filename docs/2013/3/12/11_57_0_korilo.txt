that code emits only 1 exit