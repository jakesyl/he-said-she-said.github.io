racing, that algo isn't so difficult, it just checks if there are running things else it keeps going and at the end it calls db.save or whatever