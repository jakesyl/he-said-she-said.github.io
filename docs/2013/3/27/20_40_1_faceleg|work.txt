basically refactoring the entire code base