a callback will run sync unless you defer it to the next tick or set a timeout.