but middlewares wait for the db