It's working well except for this one function.