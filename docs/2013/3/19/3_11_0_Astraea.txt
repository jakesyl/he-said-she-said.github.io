Well, I was going to go into the http handshake upgrade, but socket.io doesn't always use websockets.