I do not understand how it could break the cache for offline use. You don't need to to look for just the hash you can look for it on priority. I am sure right now npm has different logic offline and online.