smlgbl: see https://gist.github.com/peterhost/715255 as well