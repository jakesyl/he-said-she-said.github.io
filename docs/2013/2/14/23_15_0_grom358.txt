yeah.. so var last.. then outside of that for loop.. last.on('end', function() { client.end(); }