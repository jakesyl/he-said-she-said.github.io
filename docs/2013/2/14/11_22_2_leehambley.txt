https://gist.github.com/leehambley/972ad567c20634068924 < pastie