i would probably use something like thrift over msgpack