Or maybe go the route of, when functions are necessary, build a store (array of objects) and have the template loop over the store