https://github.com/LearnBoost/socket.io-client/blob/master/socket.io-client.js