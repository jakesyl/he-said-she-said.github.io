I based most of my stuff on flatiron broadway for plugins instead of middleware