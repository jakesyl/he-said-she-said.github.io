Also, PhantomJS now supports CommonJS modules. Not sure if their implementation allows you to use NPM modules just fine (I've only used it before they implemented CJS)