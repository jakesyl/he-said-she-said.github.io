check the gist: https://gist.github.com/shurane/4993778