the problem was in fact my first condition... === 'undefined' without typeof...