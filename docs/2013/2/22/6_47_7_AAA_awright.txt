How should I do byte-level locking