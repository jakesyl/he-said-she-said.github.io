How would I make this async?