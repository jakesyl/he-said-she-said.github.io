typeof arg == 'undefined' is only needed if you're not sure if it's global or not