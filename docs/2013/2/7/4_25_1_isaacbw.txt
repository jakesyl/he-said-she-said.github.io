either handler can return a promise