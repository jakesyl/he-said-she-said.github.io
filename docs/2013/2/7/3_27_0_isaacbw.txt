my second attempt at a router design that makes me happy: https://github.com/isaacbwagner/node-egress