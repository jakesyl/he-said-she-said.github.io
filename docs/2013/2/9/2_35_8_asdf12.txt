segomos: its better to add it as the last middleware