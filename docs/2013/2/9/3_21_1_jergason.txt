so since you define the function that you pass to setTimeout while socket is in scope, the anonymous function gets a reference to the socket variable