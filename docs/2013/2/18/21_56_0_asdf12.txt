you won't get a race condition though as only one end is manipulating data, and the other end is just consuming it, worse case is setTimeout or interval run a little early right before a heartbeat comes in