it's funny how making everything asynch-by-default makes doing stuff sequentially hard