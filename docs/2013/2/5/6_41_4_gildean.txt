Milos: i'd say it's just a matter of breaking the code into events, emitting some events and responding with other events