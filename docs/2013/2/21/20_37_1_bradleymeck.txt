1. dont use singletons (they will haunt you when making full mocked/spied tests) 2. npm dedup to remove all duplicated modules which cause these problems 3. if you are sharing stuff, pass it in as an argument ala: module.exports = function (ctx, app, w/e) 4. use absolute paths like the __dirname stuff