I remember doing something similar for this tiny tiny chinese ARM board thing