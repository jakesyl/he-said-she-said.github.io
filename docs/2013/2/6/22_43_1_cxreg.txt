it would probably be useful to make a npm module to generalize that