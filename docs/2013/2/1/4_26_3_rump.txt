templating in like 100 lines of js