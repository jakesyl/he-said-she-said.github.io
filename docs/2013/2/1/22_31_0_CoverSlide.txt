the answer is to not use promises