holzp: https://github.com/joyent/node/blob/master/lib/util.js#L563-L573