I should read through node-mysql's protocol code.  I wonder how long it would take to get a library of that size into my brain