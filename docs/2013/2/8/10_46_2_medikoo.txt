I assumed in above gist that all async functions that are used are prior promisified (deferred.promisify)