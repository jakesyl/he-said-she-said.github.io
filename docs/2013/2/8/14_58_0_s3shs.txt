Ideally I'd have one pre-flight function for every request, and one post-flight function for every request.  And then I could match them up.