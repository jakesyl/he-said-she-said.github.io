i think the only way to guarantee the file doesnt finish uploading would be to close the socket