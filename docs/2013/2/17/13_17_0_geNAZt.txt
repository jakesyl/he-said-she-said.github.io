or build up a function stack and make something like a middleware pattern