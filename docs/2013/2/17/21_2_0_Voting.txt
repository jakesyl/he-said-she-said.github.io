carpii: I'm trying to reduce global stuff. I'm just trying to expose an API where the user provides a call back function.