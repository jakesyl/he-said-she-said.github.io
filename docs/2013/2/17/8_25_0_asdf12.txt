its a middleware chaining nightmare