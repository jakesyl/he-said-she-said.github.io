(Ignore how messy), https://gist.github.com/4696024 why exactly if is tmp_simplate not passed out of the fs.exists?