carpii: have a look at sock.js, also i think you can configure nginx for logging chat