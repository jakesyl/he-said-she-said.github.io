how to translate this c function into node? http://hastebin.com/bonilikafa.vhdl