I should write my own templating language with async and hookers