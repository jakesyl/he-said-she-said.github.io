instead of a new thread it uses an event loop