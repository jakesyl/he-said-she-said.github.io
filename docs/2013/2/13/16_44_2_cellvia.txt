what is the best way to build a dependency tree