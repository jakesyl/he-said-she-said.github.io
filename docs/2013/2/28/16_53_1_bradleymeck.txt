you can always use nested functions to implement generators but /meh