if you need shared state, and are reading buffers in streaming manners I might look towards accepting streams instead of buffers