here's the updated version, let me know if I should not have called the id variable like that: https://gist.github.com/octaflop/4982108