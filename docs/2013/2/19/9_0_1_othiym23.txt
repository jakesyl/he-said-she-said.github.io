using Function.toString like that is probably not the safest thing in the world (among other things, it won't deal correctly with functions defined in closures), but it'll work more often than not